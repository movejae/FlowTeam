<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>파일 확장자 차단</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script th:src="@{/js/toast.js}"></script>
    <script th:src="@{/js/main.js}"></script>
</head>
<body>
    <!-- 토스트 메시지 컨테이너 -->
    <div id="toast" class="toast"></div>

    <div class="container">
        <h1>파일 확장자 차단</h1>
        <p class="subtitle">파일확장자에 따라 특정 형식의 파일을 첨부하거나 전송하지 못하도록 제한</p>

        <!-- 고정 확장자 -->
        <div class="section">
            <div class="section-title">
                <span class="section-number">1</span>
                고정 확장자
            </div>
            <div class="checkbox-group" id="fixedExtensions">
                <!-- JavaScript로 동적 로딩 -->
            </div>
        </div>

        <!-- 커스텀 확장자 입력 -->
        <div class="section">
            <div class="section-title">
                <span class="section-number">2</span>
                커스텀 확장자
            </div>
            <div class="input-group">
                <input type="text"
                       id="extensionInput"
                       placeholder="확장자 입력"
                       th:attr="maxlength=${maxLength}">
                <button class="btn-add" onclick="addExtension()">+추가</button>
            </div>
            <div class="error-message" id="errorMessage"></div>
        </div>

        <!-- 커스텀 확장자 표시 -->
        <div class="section">
            <div class="section-title">
                <span class="section-number">3</span>
            </div>
            <div class="extensions-box">
                <div class="extensions-count">
                    <span id="currentCount">0</span>/<span th:text="${maxCount}">200</span>
                </div>
                <div class="extensions-list" id="extensionsList">
                    <!-- JavaScript로 동적 로딩 -->
                </div>
                <div class="empty-message" id="emptyMessage">
                    추가된 확장자가 없습니다
                </div>
            </div>
        </div>
    </div>

    <!-- Thymeleaf에서 서버 상수를 JavaScript로 전달 -->
    <script th:inline="javascript">
        /*<![CDATA[*/
        // 서버에서 전달받은 상수를 전역 변수로 설정
        MAX_LENGTH = /*[[${maxLength}]]*/ 20;
        MAX_COUNT = /*[[${maxCount}]]*/ 200;
        /*]]>*/
    </script>

</body>
</html>
